# トークナイザの状態遷移

## 全体図
```mermaid
stateDiagram-v2
2 --> 10: $special&exclam
2 --> 11: $comment
2 --> 12: $blank
2 --> 13: $LF
2 --> 0: $EOF
11 --> 14: $note
11 --> 2: *
14 --> 2: *
12 --> 2: *
13 --> 2: *
10 --> 15: $token&include
10 --> 16: $token&using
10 --> 17: $token&replace
10 --> 18: $token&global
10 --> 19: $token&fn
15 --> 20: $split&colon
20 --> 21: $blank
20 --> 22: $token
21 --> 21: $blank
21 --> 22: $token
22 --> 23: $split&semicolon
23 --> 2: *
16 --> 24: $split&colon
24 --> 25: $blank
24 --> 26: $token
25 --> 25: $blank
25 --> 26: $token
26 --> 27: $split&semicolon
27 --> 2: *
17 --> 28: $split&colon
28 --> 29: $blank
28 --> 30: $token
29 --> 29: $blank
29 --> 30: $token
30 --> 31: $split&colon
31 --> 32: $blank
31 --> 33: $token
32 --> 32: $blank
32 --> 33: $token
33 --> 34: $split&semicolon
34 --> 2: *
18 --> 35: $split&colon
35 --> 36: $blank
35 --> 37: $token
36 --> 36: $blank
36 --> 37: $token
37 --> 38: $split&colon
38 --> 39: $blank
38 --> 40: $token
39 --> 39: $blank
39 --> 40: $token
40 --> 41: $split&semicolon
41 --> 2: *
19 --> 42: $split&colon
42 --> 43: $blank
42 --> 44: $token
43 --> 43: $blank
43 --> 44: $token
44 --> 45: $blank
44 --> 46: $special&lparen
45 --> 45: $blank
45 --> 46: $special&lparen
46 --> 47: $blank
46 --> 48: $token
46 --> 49: $special&rparen
47 --> 47: $blank
47 --> 48: $token
47 --> 49: $special&rparen
48 --> 50: $split&colon
50 --> 51: $blank
50 --> 52: $token
51 --> 51: $blank
51 --> 52: $token
52 --> 53: $blank
52 --> 54: $split&comma
52 --> 49: $special&rparen
53 --> 53: $blank
53 --> 54: $split&comma
53 --> 49: $special&rparen
54 --> 47: $blank
54 --> 48: $token
49 --> 55: $split&colon
55 --> 56: $blank
55 --> 57: $token
56 --> 56: $blank
56 --> 57: $token
57 --> 58: $blank
57 --> 5: $special&lbracket
58 --> 58: $blank
58 --> 5: $special&lbracket
5 --> 4: *
4 --> 3: *
3 --> 59: $special&exclam
3 --> 60: $comment
3 --> 61: $blank
3 --> 62: $LF
3 --> 63: $token
3 --> 7: depth=1&$special&rbracket
3 --> 8: depth>1&$special&rbracket&'semicolon
3 --> 9: depth>1&$special&rbracket&'!semicolon
8 --> 7: *
7 --> 3: depth>0
7 --> 2: depth=0
60 --> 64: $note
60 --> 3: *
64 --> 3: *
61 --> 3: *
62 --> 3: *
59 --> 65: $token&local
59 --> 66: $token&replace
59 --> 67: $token&ctrl
65 --> 68: $split&colon
68 --> 69: $token
68 --> 70: $blank
70 --> 70: $split&colon
70 --> 69: $token
69 --> 71: $split&colon
71 --> 72: $blank
71 --> 73: $token
72 --> 72: $blank
72 --> 73: $token
73 --> 74: $split&semicolon
74 --> 3: *
66 --> 75: $split&colon
75 --> 76: $blank
75 --> 77: $token
76 --> 76: $blank
76 --> 77: $token
77 --> 78: $split&colon
78 --> 79: $blank
78 --> 80: $token
79 --> 79: $blank
79 --> 80: $token
80 --> 81: $split&semicolon
81 --> 3: *
67 --> 82: $split&colon
82 --> 83: $blank
82 --> 84: $special&lparen
83 --> 83: $blank
83 --> 84: $special&lparen
84 --> 85: $blank
84 --> 86: $token
85 --> 85: $blank
85 --> 86: $token
85 --> 87: $special&rparen
86 --> 85: $blank
86 --> 87: $special&rparen
87 --> 88: $blank
87 --> 89: $token
88 --> 88: $blank
88 --> 89: $token
89 --> 90: $blank
89 --> 6: $special&lbracket
90 --> 90: $blank
90 --> 6: $special&lbracket
6 --> 4: *
9 --> 91: $blank
9 --> 89: $token
9 --> 84: $special&lparen
91 --> 91: $blank
91 --> 89: $token
91 --> 84: $special&lparen
92 --> 93: $blank
63 --> 94: $blank
63 --> 95: $split&semicolon
94 --> 63: $token
94 --> 95: $split&semicolon
94 --> 96: $assign
96 --> 97: $blank
97 --> 97: $blank
97 --> 98: $token
97 --> 99: $special&exclam
98 --> 95: $split&semicolon
99 --> 100: $token&local
100 --> 101: $split&colon
101 --> 102: $blank
101 --> 103: $token
102 --> 102: $split&colon
102 --> 103: $token
103 --> 104: $split&colon
104 --> 105: $blank
104 --> 106: $token
105 --> 105: $blank
105 --> 106: $token
106 --> 107: $split&semicolon
107 --> 3: *
95 --> 3: *
```
## 部分
```mermaid
stateDiagram-v2
TL.root --> TLdef.exclam: $special&exclam
TL.root --> TL.comment: $comment
TL.root --> TL.blank: $blank
TL.root --> TL.LF: $LF
TL.root --> EOF: $EOF

TL.comment --> TL.note: $note
TL.comment --> TL.root: *
TL.note --> TL.root: *
TL.blank --> TL.root: *
TL.LF --> TL.root: *

TLdef.exclam --> TLdef.include: $token&include
TLdef.exclam --> TLdef.using: $token&using
TLdef.exclam --> TLdef.replace: $token&replace
TLdef.exclam --> TLdef.global: $token&global
TLdef.exclam --> TLdef.func: $token&fn

TLdef.include --> TLdef.include.colon1: $split&colon
TLdef.include.colon1 --> TLdef.include.blank1: $blank
TLdef.include.colon1 --> TLdef.include.filename: $token
TLdef.include.blank1 --> TLdef.include.blank1: $blank
TLdef.include.blank1 --> TLdef.include.filename: $token
TLdef.include.filename --> TLdef.include.EOS: $split&semicolon
TLdef.include.EOS --> TL.root: *

TLdef.using --> TLdef.using.colon1: $split&colon
TLdef.using.colon1 --> TLdef.using.blank1: $blank
TLdef.using.colon1 --> TLdef.using.filename: $token
TLdef.using.blank1 --> TLdef.using.blank1: $blank
TLdef.using.blank1 --> TLdef.using.filename: $token
TLdef.using.filename --> TLdef.using.EOS: $split&semicolon
TLdef.using.EOS --> TL.root: *

TLdef.replace --> TLdef.replace.colon1: $split&colon
TLdef.replace.colon1 --> TLdef.replace.blank1: $blank
TLdef.replace.colon1 --> TLdef.replace.defname: $token
TLdef.replace.blank1 --> TLdef.replace.blank1: $blank
TLdef.replace.blank1 --> TLdef.replace.defname: $token
TLdef.replace.defname --> TLdef.replace.colon2: $split&colon
TLdef.replace.colon2 --> TLdef.replace.blank2: $blank
TLdef.replace.colon2 --> TLdef.replace.defval: $token
TLdef.replace.blank2 --> TLdef.replace.blank2: $blank
TLdef.replace.blank2 --> TLdef.replace.defval: $token
TLdef.replace.defval --> TLdef.replace.EOS: $split&semicolon
TLdef.replace.EOS --> TL.root: *

TLdef.global --> TLdef.global.colon1: $split&colon
TLdef.global.colon1 --> TLdef.global.blank1: $blank
TLdef.global.colon1 --> TLdef.global.deftype: $token
TLdef.global.blank1 --> TLdef.global.blank1: $blank
TLdef.global.blank1 --> TLdef.global.deftype: $token
TLdef.global.deftype --> TLdef.global.colon2: $split&colon
TLdef.global.colon2 --> TLdef.global.blank2: $blank
TLdef.global.colon2 --> TLdef.global.defname: $token
TLdef.global.blank2 --> TLdef.global.blank2: $blank
TLdef.global.blank2 --> TLdef.global.defname: $token
TLdef.global.defname --> TLdef.global.EOS: $split&semicolon
TLdef.global.EOS --> TL.root: *
TLdef.func --> TLdef.func.colon1: $split&colon
TLdef.func.colon1 --> TLdef.func.blank1: $blank
TLdef.func.colon1 --> TLdef.func.rettype: $token
TLdef.func.blank1 --> TLdef.func.blank1: $blank
TLdef.func.blank1 --> TLdef.func.rettype: $token
TLdef.func.rettype --> TLdef.func.blank2: $blank
TLdef.func.rettype --> TLdef.func.lparen: $special&lparen
TLdef.func.blank2 --> TLdef.func.blank2: $blank
TLdef.func.blank2 --> TLdef.func.lparen: $special&lparen
TLdef.func.lparen --> TLdef.func.args.blank1: $blank
TLdef.func.lparen --> TLdef.func.args.argstype: $token
TLdef.func.lparen --> TLdef.func.rparen: $special&rparen
    TLdef.func.args.blank1 --> TLdef.func.args.blank1: $blank
    TLdef.func.args.blank1 --> TLdef.func.args.argstype: $token
    TLdef.func.args.blank1 --> TLdef.func.rparen: $special&rparen
    TLdef.func.args.argstype --> TLdef.func.args.colon: $split&colon
    TLdef.func.args.colon --> TLdef.func.args.blank2: $blank
    TLdef.func.args.colon --> TLdef.func.args.defname: $token
    TLdef.func.args.blank2 --> TLdef.func.args.blank2: $blank
    TLdef.func.args.blank2 --> TLdef.func.args.defname: $token
    TLdef.func.args.defname --> TLdef.func.args.blank3: $blank
    TLdef.func.args.defname --> TLdef.func.args.comma: $split&comma
    TLdef.func.args.defname --> TLdef.func.rparen: $special&rparen
    TLdef.func.args.blank3 --> TLdef.func.args.blank3: $blank
    TLdef.func.args.blank3 --> TLdef.func.args.comma: $split&comma
    TLdef.func.args.blank3 --> TLdef.func.rparen: $special&rparen
    TLdef.func.args.comma --> TLdef.func.args.blank1: $blank
    TLdef.func.args.comma --> TLdef.func.args.argstype: $token
TLdef.func.rparen --> TLdef.func.colon2: $split&colon
TLdef.func.colon2 --> TLdef.func.blank3: $blank
TLdef.func.colon2 --> TLdef.func.defname: $token
TLdef.func.blank3 --> TLdef.func.blank3: $blank
TLdef.func.blank3 --> TLdef.func.defname: $token
TLdef.func.defname --> TLdef.func.blank4: $blank
TLdef.func.defname --> TLdef.func.lbracket: $special&lbracket
TLdef.func.blank4 --> TLdef.func.blank4: $blank
TLdef.func.blank4 --> TLdef.func.lbracket: $special&lbracket
TLdef.func.lbracket --> Block.entry: *

```
```mermaid
stateDiagram-v2

Block.entry --> Block.root: *
Block.root --> Block.exclam.decl: $special&exclam
Block.root --> Block.comment: $comment
Block.root --> Block.blank: $blank
Block.root --> Block.LF: $LF
Block.root --> Block.stat.expr.token: $token

Block.root --> Block.exit: depth=1&$special&rbracket
Block.root --> Block.exit_: depth>1&$special&rbracket&'semicolon
Block.root --> Block.exit.ctrl: depth>1&$special&rbracket&'!semicolon

Block.exit_ --> Block.exit: *
Block.exit --> Block.root: depth>0
Block.exit --> TL.root: depth=0

Block.comment --> Block.note: $note
Block.comment --> Block.root: *
Block.note --> Block.root: *
Block.blank --> Block.root: *
Block.LF --> Block.root: *

Block.exclam.decl --> Block.exclam.local: $token&local
Block.exclam.decl --> Block.exclam.replace: $token&replace
Block.exclam.decl --> Block.exclam.ctrl: $token&ctrl

Block.exclam.local --> Block.exclam.local.colon1: $split&colon
Block.exclam.local.colon1 --> Block.exclam.local.deftype: $token
Block.exclam.local.colon1 --> Block.exclam.local.blank1: $blank
Block.exclam.local.blank1 --> Block.exclam.local.blank1: $split&colon
Block.exclam.local.blank1 --> Block.exclam.local.deftype: $token
Block.exclam.local.deftype --> Block.exclam.local.colon2: $split&colon
Block.exclam.local.colon2 --> Block.exclam.local.blank2: $blank
Block.exclam.local.colon2 --> Block.exclam.local.defname: $token
Block.exclam.local.blank2 --> Block.exclam.local.blank2: $blank
Block.exclam.local.blank2 --> Block.exclam.local.defname: $token
Block.exclam.local.defname --> Block.exclam.local.end: $split&semicolon
Block.exclam.local.end --> Block.root: *

Block.exclam.replace --> Block.exclam.replace.colon1: $split&colon
Block.exclam.replace.colon1 --> Block.exclam.replace.blank1: $blank
Block.exclam.replace.colon1 --> Block.exclam.replace.defname: $token
Block.exclam.replace.blank1 --> Block.exclam.replace.blank1: $blank
Block.exclam.replace.blank1 --> Block.exclam.replace.defname: $token
Block.exclam.replace.defname --> Block.exclam.replace.colon2: $split&colon
Block.exclam.replace.colon2 --> Block.exclam.replace.blank2: $blank
Block.exclam.replace.colon2 --> Block.exclam.replace.defval: $token
Block.exclam.replace.blank2 --> Block.exclam.replace.blank2: $blank
Block.exclam.replace.blank2 --> Block.exclam.replace.defval: $token
Block.exclam.replace.defval --> Block.exclam.replace.EOS: $split&semicolon
Block.exclam.replace.EOS --> Block.root: *

Block.exclam.ctrl --> Block.exclam.ctrl.colon1: $split&colon
Block.exclam.ctrl.colon1 --> Block.exclam.ctrl.blank1: $blank
Block.exclam.ctrl.colon1 --> Block.exclam.ctrl.lparen: $special&lparen
Block.exclam.ctrl.blank1 --> Block.exclam.ctrl.blank1: $blank
Block.exclam.ctrl.blank1 --> Block.exclam.ctrl.lparen: $special&lparen
Block.exclam.ctrl.lparen --> Block.exclam.ctrl.cond.blank: $blank
Block.exclam.ctrl.lparen --> Block.exclam.ctrl.cond.token: $token
Block.exclam.ctrl.cond.blank --> Block.exclam.ctrl.cond.blank: $blank
Block.exclam.ctrl.cond.blank --> Block.exclam.ctrl.cond.token: $token
Block.exclam.ctrl.cond.blank --> Block.exclam.ctrl.rparen: $special&rparen
Block.exclam.ctrl.cond.token --> Block.exclam.ctrl.cond.blank: $blank
Block.exclam.ctrl.cond.token --> Block.exclam.ctrl.rparen: $special&rparen
Block.exclam.ctrl.rparen --> Block.exclam.ctrl.blank2: $blank
Block.exclam.ctrl.rparen --> Block.exclam.ctrl.type: $token
Block.exclam.ctrl.blank2 --> Block.exclam.ctrl.blank2: $blank
Block.exclam.ctrl.blank2 --> Block.exclam.ctrl.type: $token
Block.exclam.ctrl.type --> Block.exclam.ctrl.blank3: $blank
Block.exclam.ctrl.type --> Block.exclam.lbracket: $special&lbracket
Block.exclam.ctrl.blank3 --> Block.exclam.ctrl.blank3: $blank
Block.exclam.ctrl.blank3 --> Block.exclam.lbracket: $special&lbracket
Block.exclam.lbracket --> Block.entry: *

Block.exit.ctrl --> Block.exclam.continue.blank1: $blank
Block.exit.ctrl --> Block.exclam.ctrl.type: $token
Block.exit.ctrl --> Block.exclam.ctrl.lparen: $special&lparen
Block.exclam.continue.blank1 --> Block.exclam.continue.blank1: $blank
Block.exclam.continue.blank1 --> Block.exclam.ctrl.type: $token
Block.exclam.continue.blank1 --> Block.exclam.ctrl.lparen: $special&lparen
Block.exclam.continue.else --> Block.exclam.continue.blank3: $blank

Block.stat.expr.token --> Block.stat.expr.blank: $blank
Block.stat.expr.token --> Block.stat.end: $split&semicolon
Block.stat.expr.blank --> Block.stat.expr.token: $token
Block.stat.expr.blank --> Block.stat.end: $split&semicolon
Block.stat.expr.blank --> Block.stat.assign: $assign
Block.stat.assign --> Block.stat.blank1: $blank
Block.stat.blank1 --> Block.stat.blank1: $blank
Block.stat.blank1 --> Block.stat.assignvar: $token
Block.stat.blank1 --> Block.stat.exclam.decl: $special&exclam
Block.stat.assignvar --> Block.stat.end: $split&semicolon
    Block.stat.exclam.decl --> Block.stat.exclam.local: $token&local
    Block.stat.exclam.local --> Block.stat.exclam.local.colon1: $split&colon
    Block.stat.exclam.local.colon1 --> Block.stat.exclam.local.blank1: $blank
    Block.stat.exclam.local.colon1 --> Block.stat.exclam.local.deftype: $token
    Block.stat.exclam.local.blank1 --> Block.stat.exclam.local.blank1: $split&colon
    Block.stat.exclam.local.blank1 --> Block.stat.exclam.local.deftype: $token
    Block.stat.exclam.local.deftype --> Block.stat.exclam.local.colon2: $split&colon
    Block.stat.exclam.local.colon2 --> Block.stat.exclam.local.blank2: $blank
    Block.stat.exclam.local.colon2 --> Block.stat.exclam.local.defname: $token
    Block.stat.exclam.local.blank2 --> Block.stat.exclam.local.blank2: $blank
    Block.stat.exclam.local.blank2 --> Block.stat.exclam.local.defname: $token
    Block.stat.exclam.local.defname --> Block.stat.exclam.local.end: $split&semicolon
    Block.stat.exclam.local.end --> Block.root: *
Block.stat.end --> Block.root: *
```